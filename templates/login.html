<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAYA-DISK - Login</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .login-switch {
            display: flex;
            margin-bottom: 20px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #ddd;
        }
        .login-switch button {
            flex: 1;
            padding: 12px;
            border: none;
            background: #f5f5f5;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .login-switch button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .login-switch button:hover:not(.active) {
            background: #e9e9e9;
        }
        .email-input-group {
            width: 100%;
        }
        .email-input-group input {
            width: 100%;
        }
        .phone-input-group {
            display: flex;
            gap: 8px;
        }
        .phone-input-group select {
            flex: 0 0 100px;
            padding: 12px 8px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }
        .phone-input-group input {
            flex: 1;
        }
        #emailGroup, #phoneGroup {
            display: none;
        }
        #emailGroup.active, #phoneGroup.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-box">
            <div class="auth-header">
                <h1><img src="/resources/64px.jpg" alt="HAYA-DISK" class="title-icon"> HAYA-DISK</h1>
                <p>Login to your account</p>
            </div>

            {{if .error}}
                <div class="error-message">
                    <p>‚ö†Ô∏è {{.error}}</p>
                </div>
            {{end}}

            <form class="auth-form" method="POST">
                <div class="login-switch">
                    <button type="button" id="emailSwitch" class="active" onclick="switchToEmail()">üìß Email</button>
                    <button type="button" id="phoneSwitch" onclick="switchToPhone()">üì± Phone</button>
                </div>

                <input type="hidden" id="loginType" name="login_type" value="email">

                <div id="emailGroup" class="form-group active">
                    <label for="email">Email Address</label>
                    <div class="email-input-group">
                        <input type="email" id="email" name="email" placeholder="Enter your email">
                    </div>
                </div>

                <div id="phoneGroup" class="form-group">
                    <label for="phone">Phone Number</label>
                    <div class="phone-input-group">
                        <select id="phone_region" name="phone_region" title="Select region">
                            <option value="CN">CN +86</option>
                            <option value="US">US +1</option>
                            <option value="CA">CA +1</option>
                            <option value="UK">UK +44</option>
                            <option value="JP">JP +81</option>
                            <option value="KR">KR +82</option>
                            <option value="TW">TW +886</option>
                            <option value="HK">HK +852</option>
                            <option value="SG">SG +65</option>
                            <option value="AU">AU +61</option>
                            <option value="DE">DE +49</option>
                            <option value="FR">FR +33</option>
                            <option value="IN">IN +91</option>
                            <option value="RU">RU +7</option>
                            <option value="BR">BR +55</option>
                            <option value="MX">MX +52</option>
                        </select>
                        <input type="tel" id="phone" name="phone" placeholder="Phone number">
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required placeholder="Enter your password">
                </div>

                <button type="submit" class="btn btn-primary btn-large">Login</button>
            </form>

            <div class="auth-footer">
                <p>Don't have an account? <a href="/register">Register here</a></p>
            </div>
        </div>
    </div>

    <script>
        function switchToEmail() {
            document.getElementById('emailSwitch').classList.add('active');
            document.getElementById('phoneSwitch').classList.remove('active');
            document.getElementById('emailGroup').classList.add('active');
            document.getElementById('phoneGroup').classList.remove('active');
            document.getElementById('loginType').value = 'email';
            document.getElementById('email').required = true;
            document.getElementById('phone').required = false;
        }

        function switchToPhone() {
            document.getElementById('phoneSwitch').classList.add('active');
            document.getElementById('emailSwitch').classList.remove('active');
            document.getElementById('phoneGroup').classList.add('active');
            document.getElementById('emailGroup').classList.remove('active');
            document.getElementById('loginType').value = 'phone';
            document.getElementById('phone').required = true;
            document.getElementById('email').required = false;
        }

        // Initialize
        document.getElementById('email').required = true;
    </script>
</body>
</html>
